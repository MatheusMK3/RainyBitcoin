[Rainmeter]
Author=Noi Sek
Update=5000

[Metadata]
Name=BTC Line Graph
Description=Displays a graph of Bitcoin prices over time.
License=Creative Commons BY-NC-SA 3.0
Version=1.0

[Variables]
DynamicVariables=1
@include="#SKINSPATH#\RainyBitcoin\Options.inc"

[styleText]
AntiAlias=1
FontColor=255,255,255
FontSize=10
StringStyle=BOLD

[Background]
Meter=Image
SolidColor=0,0,0,0
X=0
Y=0
W=200
H=200

[MtGoxAPI]
Measure=Plugin
Plugin=WebParser
UpdateRate=0
URL=http://data.mtgox.com/api/2/BTC#Currency#/money/ticker_fast
RegExp=""value":"(.*?)","
ErrorString=API Down

[MtGoxLast]
Measure=Plugin
Plugin=WebParser
URL=[MtGoxAPI]
StringIndex=1

[MtGoxAPI2]
Measure=Plugin
Plugin=WebParser
URL=http://data.mtgox.com/api/2/BTC#Currency#/money/ticker
RegExp=""high":{"value":"(.*?)",.*"low":{"value":"(.*?)","
ErrorString=API Down

[MtGoxHigh]
Measure=Plugin
Plugin=WebParser
URL=[MtGoxAPI2]
StringIndex=1

[MtGoxLow]
Measure=Plugin
Plugin=WebParser
URL=[MtGoxAPI2]
StringIndex=2

[MtGoxPercentage]
Measure=Calc
Formula=abs((MtGoxLast - MtGoxHigh)/(MtGoxHigh - MtGoxLow))

[BitstampAPI]
Measure=Plugin
Plugin=WebParser
UpdateRate=0
URL=https://www.bitstamp.net/api/ticker/
RegExp=""high": "(.*?)", "last": "(.*?)",.*"low": "(.*?)","
ErrorString=API Down

[BitstampLast]
Measure=Plugin
Plugin=WebParser
URL=[BitstampAPI]
StringIndex=2

[BitstampHigh]
Measure=Plugin
Plugin=WebParser
URL=[BitstampAPI]
StringIndex=1

[BitstampLow]
Measure=Plugin
Plugin=WebParser
URL=[BitstampAPI]
StringIndex=3

[BitstampPercentage]
Measure=Calc
Formula=abs((BitstampLast - BitstampHigh)/(BitstampHigh - BitstampLow))

[DisplayGraph]
Meter=Line
LineCount=2
GraphStart=Left
MeasureName=MtGoxPercentage
MeasureName2=BitstampPercentage
LineColor=FFCC33
LineColor2=3366FF
AutoScale=1
AntiAlias=1
H=135
W=200

[DisplayMtGoxLegend]
Meter=Image
SolidColor=FFCC33
H=10
W=10
X=0
Y=142

[DisplayMtGoxRange]
Meter=String
MeterStyle=styleText
DynamicVariables=1
Text=MtGox [MtGoxHigh:2] // [MtGoxLow:2]
X=15
Y=140

[DisplayBitstampLegend]
Meter=Image
SolidColor=3366FF
H=10
W=10
X=0
Y=157

[DisplayBitstampRange]
Meter=String
MeterStyle=styleText
DynamicVariables=1
Text=Bitstamp [BitstampHigh:2] // [BitstampLow:2]
X=15
Y=155

